<!doctype html>
<html>
<head>
<title>Bismuth</title>
<style>
body {
    text-align: center;
    font-family: Arial;
}
h1, h2, h3, h4, p, div, ul {
    text-align: justify;
}
#sourcecode {
    font-family: Consolas, "Courier New", monospace;
    width: 100%;
    margin-top: 40px;
    min-height: 300px;
}
#generated {
    white-space: pre;
    font-family: Consolas, "Courier New", monospace
}
#errors {
    font-family: Arial;
    color: #A00;
}
</style>
</head>
<body>
    <script src="build/build.js"></script>
    <h1>Bismuth - Run Online</h1>
    <p>Bismuth is a pure, strongly and statically-typed <em>imperative</em> programming language that keeps code predictable and easy to refactor.</p>
    <p>Bismuth currently supports type-generic functions and data types, with generic constraints in-the-works.</p>
    <p>Functions specify their side-effects through <em>effect signatures</em>.
        These signatures offer similar benefits to the "dependency-injection" style used by many languages and frameworks to improve testability.
    </p>
    <p>
        Bismuth will hopefully soon offer additional features:
        <ul>
        <li>a form of linear or unique typing, to better model resources like memory;
        <li>a form of flow-typing or static precondition check to eliminate error cases statically;
        <li>a protocol specification language that allows system properties to be verified;
        <li>a reflection suite to eliminate repetitive boilerplate;
        <li>a reference-counting memory reclaimation system that avoids the need for expensive GC operations (when targeting C).
        </ul>
    </p>
    <p>
        The Bismuth compiler is written in TypeScript.
        You can run it on this page to produce runnable JavaScript.
        Future versions will also target C.
    </p>
    <textarea id="sourcecode">


func map[A, B](xs: Array[A], f: func(A)->B) -> Array[B] {
    var result: Array[B] = #[];
    var i: Int = 0;
    while less(i, length(xs)) {
        result = append(result, #[f(at(xs, i))]);
    }
    return result;
}

func filter[A](xs: Array[A], f: func(A)->Bool) -> Array[A] {
    var result: Array[A] = #[];
    var i: Int = 0;
    while less(i, length(xs)) {
        if f(at(xs, i)) {
            result = append(result, #[at(xs, i)]);
        }
    }
    return result;
}

</textarea>
    <button onclick="compile(document.getElementById('sourcecode').value)">Compile</button>
    <div id="errors"></div>
    <div id="generated"></div>
</body>
</html>